vega chart streamgraph
source: https://gist.github.com/randyzwitch/0b7b852f34d0df1884ab


{
  "name": "Vega Visualization",
  "height": 500,
  "padding": "auto",
  "marks": [
    {
      "marks": [
        {
          "properties": {
            "enter": {
              "interpolate": {"value": "cardinal"},
              "x": {"field": "x","scale": "x"},
              "y2": {"field": "layout_end","scale": "y"},
              "fill": {"field": "group","scale": "group"},
              "y": {"field": "layout_start","scale": "y"}
            }
          },
          "type": "area"
        }
      ],
      "from": {
        "data": "table",
        "transform": [
          {
            "field": "y",
            "groupby": ["x"],
            "type": "stack",
            "offset": "center"
          },
          {"groupby": ["group"],"type": "facet"}
        ]
      },
      "type": "group"
    }
  ],
  "axes": [
    {"type": "x","scale": "x"},
    {
      "type": "y",
      "scale": "y",
      "tickSize": 0,
      "properties": {"labels": {"fontSize": {"value": 0}}}
    }
  ],
  "data": [
    {
      "name": "table",
      "values": [
        {"x": "01/08/2013","y2": 0,"group": "AR","y": 0.1},
        {"x": "01/09/2013","y2": 0,"group": "AR","y": 0.15},
        {"x": "01/10/2013","y2": 0,"group": "AR","y": 0.35},
        {"x": "01/11/2013","y2": 0,"group": "AR","y": 0.38},
        {"x": "01/12/2013","y2": 0,"group": "AR","y": 0.22},
        {"x": "01/13/2013","y2": 0,"group": "AR","y": 0.16},
        {"x": "01/14/2013","y2": 0,"group": "AR","y": 0.07},
        {"x": "01/15/2013","y2": 0,"group": "AR","y": 0.02},
        {"x": "01/16/2013","y2": 0,"group": "AR","y": 0.17},
        {"x": "01/17/2013","y2": 0,"group": "AR","y": 0.33},
        {"x": "01/18/2013","y2": 0,"group": "AR","y": 0.4},
        {"x": "01/19/2013","y2": 0,"group": "AR","y": 0.32},
        {"x": "01/20/2013","y2": 0,"group": "AR","y": 0.26},
        {"x": "01/21/2013","y2": 0,"group": "AR","y": 0.35},
        {"x": "01/22/2013","y2": 0,"group": "AR","y": 0.4},
        {"x": "01/23/2013","y2": 0,"group": "AR","y": 0.32},
        {"x": "01/24/2013","y2": 0,"group": "AR","y": 0.26},
        {"x": "01/25/2013","y2": 0,"group": "AR","y": 0.22},
        {"x": "01/26/2013","y2": 0,"group": "AR","y": 0.16},
        {"x": "01/27/2013","y2": 0,"group": "AR","y": 0.22},
        {"x": "01/28/2013","y2": 0,"group": "AR","y": 0.1},
        {"x": "01/08/2013","y2": 0,"group": "DJ","y": 0.35},
        {"x": "01/09/2013","y2": 0,"group": "DJ","y": 0.36},
        {"x": "01/10/2013","y2": 0,"group": "DJ","y": 0.37},
        {"x": "01/11/2013","y2": 0,"group": "DJ","y": 0.22},
        {"x": "01/12/2013","y2": 0,"group": "DJ","y": 0.24},
        {"x": "01/13/2013","y2": 0,"group": "DJ","y": 0.26},
        {"x": "01/14/2013","y2": 0,"group": "DJ","y": 0.34},
        {"x": "01/15/2013","y2": 0,"group": "DJ","y": 0.21},
        {"x": "01/16/2013","y2": 0,"group": "DJ","y": 0.18},
        {"x": "01/17/2013","y2": 0,"group": "DJ","y": 0.45},
        {"x": "01/18/2013","y2": 0,"group": "DJ","y": 0.32},
        {"x": "01/19/2013","y2": 0,"group": "DJ","y": 0.35},
        {"x": "01/20/2013","y2": 0,"group": "DJ","y": 0.3},
        {"x": "01/21/2013","y2": 0,"group": "DJ","y": 0.28},
        {"x": "01/22/2013","y2": 0,"group": "DJ","y": 0.27},
        {"x": "01/23/2013","y2": 0,"group": "DJ","y": 0.26},
        {"x": "01/24/2013","y2": 0,"group": "DJ","y": 0.15},
        {"x": "01/25/2013","y2": 0,"group": "DJ","y": 0.3},
        {"x": "01/26/2013","y2": 0,"group": "DJ","y": 0.35},
        {"x": "01/27/2013","y2": 0,"group": "DJ","y": 0.42},
        {"x": "01/28/2013","y2": 0,"group": "DJ","y": 0.42},
        {"x": "01/08/2013","y2": 0,"group": "MS","y": 0.21},
        {"x": "01/09/2013","y2": 0,"group": "MS","y": 0.25},
        {"x": "01/10/2013","y2": 0,"group": "MS","y": 0.27},
        {"x": "01/11/2013","y2": 0,"group": "MS","y": 0.23},
        {"x": "01/12/2013","y2": 0,"group": "MS","y": 0.24},
        {"x": "01/13/2013","y2": 0,"group": "MS","y": 0.21},
        {"x": "01/14/2013","y2": 0,"group": "MS","y": 0.35},
        {"x": "01/15/2013","y2": 0,"group": "MS","y": 0.39},
        {"x": "01/16/2013","y2": 0,"group": "MS","y": 0.4},
        {"x": "01/17/2013","y2": 0,"group": "MS","y": 0.36},
        {"x": "01/18/2013","y2": 0,"group": "MS","y": 0.33},
        {"x": "01/19/2013","y2": 0,"group": "MS","y": 0.43},
        {"x": "01/20/2013","y2": 0,"group": "MS","y": 0.4},
        {"x": "01/21/2013","y2": 0,"group": "MS","y": 0.34},
        {"x": "01/22/2013","y2": 0,"group": "MS","y": 0.28},
        {"x": "01/23/2013","y2": 0,"group": "MS","y": 0.26},
        {"x": "01/24/2013","y2": 0,"group": "MS","y": 0.37},
        {"x": "01/25/2013","y2": 0,"group": "MS","y": 0.41},
        {"x": "01/26/2013","y2": 0,"group": "MS","y": 0.46},
        {"x": "01/27/2013","y2": 0,"group": "MS","y": 0.47},
        {"x": "01/28/2013","y2": 0,"group": "MS","y": 0.41},
        {"x": "01/08/2013","y2": 0,"group": "RC","y": 0.1},
        {"x": "01/09/2013","y2": 0,"group": "RC","y": 0.15},
        {"x": "01/10/2013","y2": 0,"group": "RC","y": 0.35},
        {"x": "01/11/2013","y2": 0,"group": "RC","y": 0.38},
        {"x": "01/12/2013","y2": 0,"group": "RC","y": 0.22},
        {"x": "01/13/2013","y2": 0,"group": "RC","y": 0.16},
        {"x": "01/14/2013","y2": 0,"group": "RC","y": 0.07},
        {"x": "01/15/2013","y2": 0,"group": "RC","y": 0.02},
        {"x": "01/16/2013","y2": 0,"group": "RC","y": 0.17},
        {"x": "01/17/2013","y2": 0,"group": "RC","y": 0.33},
        {"x": "01/18/2013","y2": 0,"group": "RC","y": 0.4},
        {"x": "01/19/2013","y2": 0,"group": "RC","y": 0.32},
        {"x": "01/20/2013","y2": 0,"group": "RC","y": 0.26},
        {"x": "01/21/2013","y2": 0,"group": "RC","y": 0.35},
        {"x": "01/22/2013","y2": 0,"group": "RC","y": 0.4},
        {"x": "01/23/2013","y2": 0,"group": "RC","y": 0.32},
        {"x": "01/24/2013","y2": 0,"group": "RC","y": 0.26},
        {"x": "01/25/2013","y2": 0,"group": "RC","y": 0.22},
        {"x": "01/26/2013","y2": 0,"group": "RC","y": 0.16},
        {"x": "01/27/2013","y2": 0,"group": "RC","y": 0.22},
        {"x": "01/28/2013","y2": 0,"group": "RC","y": 0.1},
        {"x": "01/08/2013","y2": 0,"group": "CG","y": 0.1},
        {"x": "01/09/2013","y2": 0,"group": "CG","y": 0.15},
        {"x": "01/10/2013","y2": 0,"group": "CG","y": 0.35},
        {"x": "01/11/2013","y2": 0,"group": "CG","y": 0.38},
        {"x": "01/12/2013","y2": 0,"group": "CG","y": 0.22},
        {"x": "01/13/2013","y2": 0,"group": "CG","y": 0.16},
        {"x": "01/14/2013","y2": 0,"group": "CG","y": 0.07},
        {"x": "01/15/2013","y2": 0,"group": "CG","y": 0.02},
        {"x": "01/16/2013","y2": 0,"group": "CG","y": 0.17},
        {"x": "01/17/2013","y2": 0,"group": "CG","y": 0.33},
        {"x": "01/18/2013","y2": 0,"group": "CG","y": 0.4},
        {"x": "01/19/2013","y2": 0,"group": "CG","y": 0.32},
        {"x": "01/20/2013","y2": 0,"group": "CG","y": 0.26},
        {"x": "01/21/2013","y2": 0,"group": "CG","y": 0.35},
        {"x": "01/22/2013","y2": 0,"group": "CG","y": 0.4},
        {"x": "01/23/2013","y2": 0,"group": "CG","y": 0.32},
        {"x": "01/24/2013","y2": 0,"group": "CG","y": 0.26},
        {"x": "01/25/2013","y2": 0,"group": "CG","y": 0.22},
        {"x": "01/26/2013","y2": 0,"group": "CG","y": 0.16},
        {"x": "01/27/2013","y2": 0,"group": "CG","y": 0.22},
        {"x": "01/28/2013","y2": 0,"group": "CG","y": 0.1},
        {"x": "01/08/2013","y2": 0,"group": "RI","y": 0.1},
        {"x": "01/09/2013","y2": 0,"group": "RI","y": 0.15},
        {"x": "01/10/2013","y2": 0,"group": "RI","y": 0.35},
        {"x": "01/11/2013","y2": 0,"group": "RI","y": 0.38},
        {"x": "01/12/2013","y2": 0,"group": "RI","y": 0.22},
        {"x": "01/13/2013","y2": 0,"group": "RI","y": 0.16},
        {"x": "01/14/2013","y2": 0,"group": "RI","y": 0.07},
        {"x": "01/15/2013","y2": 0,"group": "RI","y": 0.02},
        {"x": "01/16/2013","y2": 0,"group": "RI","y": 0.17},
        {"x": "01/17/2013","y2": 0,"group": "RI","y": 0.33},
        {"x": "01/18/2013","y2": 0,"group": "RI","y": 0.4},
        {"x": "01/19/2013","y2": 0,"group": "RI","y": 0.32},
        {"x": "01/20/2013","y2": 0,"group": "RI","y": 0.26},
        {"x": "01/21/2013","y2": 0,"group": "RI","y": 0.35},
        {"x": "01/22/2013","y2": 0,"group": "RI","y": 0.4},
        {"x": "01/23/2013","y2": 0,"group": "RI","y": 0.32},
        {"x": "01/24/2013","y2": 0,"group": "RI","y": 0.26},
        {"x": "01/25/2013","y2": 0,"group": "RI","y": 0.22},
        {"x": "01/26/2013","y2": 0,"group": "RI","y": 0.16},
        {"x": "01/27/2013","y2": 0,"group": "RI","y": 0.22},
        {"x": "01/28/2013","y2": 0,"group": "RI","y": 0.1}
      ]
    },
    {
      "name": "stats",
      "source": "table",
      "transform": [
        {
          "groupby": ["x"],
          "type": "aggregate",
          "summarize": [{"ops": ["sum"],"field": "y"}]
        }
      ]
    }
  ],
  "scales": [
    {
      "name": "x",
      "points": true,
      "range": "width",
      "domain": {"data": "table","field": "x"},
      "type": "ordinal"
    },
    {
      "name": "y",
      "range": "height",
      "domain": {"data": "stats","field": "sum_y"},
      "type": "linear"
    },
    {
      "name": "group",
      "range": [
        "#B30000",
        "#E34A33",
        "#FC8D59",
        "#FDBB84",
        "#FDD49E",
        "#FEF0D9"
      ],
      "domain": {"data": "table","field": "group"},
      "type": "ordinal"
    }
  ],
  "width": 1200,
  "legends": [{"title": "Group","fill": "group"}]
}